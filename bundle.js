(()=>{"use strict";const e=[[{code:"Backquote",func:!1,lang:{en:"`",ru:"ё",enShift:"~",ruShift:"Ё"},width:"regular"},{code:"Digit1",func:!1,lang:{en:"1",ru:"1",enShift:"!",ruShift:"!"},width:"regular"},{code:"Digit2",func:!1,lang:{en:"2",ru:"2",enShift:"@",ruShift:'"'},width:"regular"},{code:"Digit3",func:!1,lang:{en:"3",ru:"3",enShift:"#",ruShift:"№"},width:"regular"},{code:"Digit4",func:!1,lang:{en:"4",ru:"4",enShift:"$",ruShift:";"},width:"regular"},{code:"Digit5",func:!1,lang:{en:"5",ru:"5",enShift:"%",ruShift:"%"},width:"regular"},{code:"Digit6",func:!1,lang:{en:"6",ru:"6",enShift:"^",ruShift:":"},width:"regular"},{code:"Digit7",func:!1,lang:{en:"7",ru:"7",enShift:"&",ruShift:"?"},width:"regular"},{code:"Digit8",func:!1,lang:{en:"8",ru:"8",enShift:"*",ruShift:"*"},width:"regular"},{code:"Digit9",func:!1,lang:{en:"9",ru:"9",enShift:"(",ruShift:"("},width:"regular"},{code:"Digit0",func:!1,lang:{en:"0",ru:"0",enShift:")",ruShift:")"},width:"regular"},{code:"Minus",func:!1,lang:{en:"-",ru:"-",enShift:"_",ruShift:"_"},width:"regular"},{code:"Equal",func:!1,lang:{en:"=",ru:"=",enShift:"+",ruShift:"+"},width:"regular"},{code:"Backspace",func:!0,lang:{en:"⌫ Backspace",ru:"⌫ Backspace",enShift:"⌫ Backspace",ruShift:"⌫ Backspace"},width:"average-wide"}],[{code:"Tab",func:!0,lang:{en:"↹ Tab",ru:"↹ Tab",enShift:"↹ Tab",ruShift:"↹ Tab"},width:"regular-wide"},{code:"KeyQ",func:!1,lang:{en:"q",ru:"й",enShift:"Q",ruShift:"Й"},width:"regular"},{code:"KeyW",func:!1,lang:{en:"w",ru:"ц",enShift:"W",ruShift:"Ц"},width:"regular"},{code:"KeyE",func:!1,lang:{en:"e",ru:"у",enShift:"E",ruShift:"У"},width:"regular"},{code:"KeyR",func:!1,lang:{en:"r",ru:"к",enShift:"R",ruShift:"К"},width:"regular"},{code:"KeyT",func:!1,lang:{en:"t",ru:"е",enShift:"T",ruShift:"Е"},width:"regular"},{code:"KeyY",func:!1,lang:{en:"y",ru:"н",enShift:"Y",ruShift:"Н"},width:"regular"},{code:"KeyU",func:!1,lang:{en:"u",ru:"г",enShift:"U",ruShift:"Г"},width:"regular"},{code:"KeyI",func:!1,lang:{en:"i",ru:"ш",enShift:"I",ruShift:"Ш"},width:"regular"},{code:"KeyO",func:!1,lang:{en:"o",ru:"щ",enShift:"O",ruShift:"Щ"},width:"regular"},{code:"KeyP",func:!1,lang:{en:"p",ru:"з",enShift:"P",ruShift:"З"},width:"regular"},{code:"BracketLeft",func:!1,lang:{en:"[",ru:"х",enShift:"{",ruShift:"Х"},width:"regular"},{code:"BracketRight",func:!1,lang:{en:"]",ru:"ъ",enShift:"}",ruShift:"Ъ"},width:"regular"},{code:"Backslash",func:!1,lang:{en:"\\",ru:"\\",enShift:"|",ruShift:"//"},width:"backslash"}],[{code:"CapsLock",func:!0,lang:{en:"Caps Lock",ru:"Caps Lock",enShift:"Caps Lock",ruShift:"Caps Lock"},width:"extra-wide"},{code:"KeyA",func:!1,lang:{en:"a",ru:"ф",enShift:"A",ruShift:"Ф"},width:"regular"},{code:"KeyS",func:!1,lang:{en:"s",ru:"ы",enShift:"S",ruShift:"Ы"},width:"regular"},{code:"KeyD",func:!1,lang:{en:"d",ru:"в",enShift:"D",ruShift:"В"},width:"regular"},{code:"KeyF",func:!1,lang:{en:"f",ru:"а",enShift:"F",ruShift:"А"},width:"regular"},{code:"KeyG",func:!1,lang:{en:"g",ru:"п",enShift:"G",ruShift:"П"},width:"regular"},{code:"KeyH",func:!1,lang:{en:"h",ru:"р",enShift:"H",ruShift:"Р"},width:"regular"},{code:"KeyJ",func:!1,lang:{en:"j",ru:"о",enShift:"J",ruShift:"О"},width:"regular"},{code:"KeyK",func:!1,lang:{en:"k",ru:"л",enShift:"K",ruShift:"Л"},width:"regular"},{code:"KeyL",func:!1,lang:{en:"l",ru:"д",enShift:"L",ruShift:"Д"},width:"regular"},{code:"Semicolon",func:!1,lang:{en:";",ru:"ж",enShift:":",ruShift:"Ж"},width:"regular"},{code:"Quote",func:!1,lang:{en:"'",ru:"э",enShift:'"',ruShift:"Э"},width:"regular"},{code:"Enter",func:!0,lang:{en:"↩ Enter",ru:"↩ Enter",enShift:"↩ Enter",ruShift:"↩ Enter"},width:"ultra-wide"}],[{code:"ShiftLeft",func:!0,lang:{en:"⇧ Shift",ru:"⇧ Shift",enShift:"⇧ Shift",ruShift:"⇧ Shift"},width:"ultra-wide"},{code:"KeyZ",func:!1,lang:{en:"z",ru:"я",enShift:"Z",ruShift:"Я"},width:"regular"},{code:"KeyX",func:!1,lang:{en:"x",ru:"ч",enShift:"X",ruShift:"Ч"},width:"regular"},{code:"KeyC",func:!1,lang:{en:"c",ru:"с",enShift:"C",ruShift:"С"},width:"regular"},{code:"KeyV",func:!1,lang:{en:"v",ru:"м",enShift:"V",ruShift:"М"},width:"regular"},{code:"KeyB",func:!1,lang:{en:"b",ru:"и",enShift:"B",ruShift:"И"},width:"regular"},{code:"KeyN",func:!1,lang:{en:"n",ru:"т",enShift:"N",ruShift:"Т"},width:"regular"},{code:"KeyM",func:!1,lang:{en:"m",ru:"ь",enShift:"M",ruShift:"Ь"},width:"regular"},{code:"Comma",func:!1,lang:{en:",",ru:"б",enShift:"<",ruShift:"Б"},width:"regular"},{code:"Period",func:!1,lang:{en:".",ru:"ю",enShift:">",ruShift:"Ю"},width:"regular"},{code:"Slash",func:!1,lang:{en:"/",ru:".",enShift:"?",ruShift:","},width:"regular"},{code:"ShiftRight",func:!0,lang:{en:"⇧ Shift",ru:"⇧ Shift",enShift:"⇧ Shift",ruShift:"⇧ Shift"},width:"extra-wide"},{code:"ArrowUp",func:!0,lang:{en:"⯅",ru:"⯅",enShift:"⯅",ruShift:"⯅"},width:"regular"},{code:"Delete",func:!0,lang:{en:"Del",ru:"Del",enShift:"Del",ruShift:"Del"},width:"regular"}],[{code:"ControlLeft",func:!0,lang:{en:"Ctrl",ru:"Ctrl",enShift:"Ctrl",ruShift:"Ctrl"},width:"extra-wide"},{code:"MetaLeft",func:!0,lang:{en:"⊞",ru:"⊞",enShift:"⊞",ruShift:"⊞"},width:"regular"},{code:"AltLeft",func:!0,lang:{en:"Alt",ru:"Alt",enShift:"Alt",ruShift:"Alt"},width:"regular"},{code:"Space",func:!1,lang:{en:" ",ru:" ",enShift:" ",ruShift:" "},width:"space"},{code:"AltRight",func:!0,lang:{en:"Alt",ru:"Alt",enShift:"Alt",ruShift:"Alt"},width:"regular"},{code:"ContextMenu",func:!0,lang:{en:"▤",ru:"▤",enShift:"▤",ruShift:"▤"},width:"regular"},{code:"ControlRight",func:!0,lang:{en:"Ctrl",ru:"Ctrl",enShift:"Ctrl",ruShift:"Ctrl"},width:"extra-wide"},{code:"ArrowLeft",func:!0,lang:{en:"⯇",ru:"⯇",enShift:"⯇",ruShift:"⯇"},width:"regular"},{code:"ArrowDown",func:!0,lang:{en:"⯆",ru:"⯆",enShift:"⯆",ruShift:"⯆"},width:"regular"},{code:"ArrowRight",func:!0,lang:{en:"⯈",ru:"⯈",enShift:"⯈",ruShift:"⯈"},width:"regular"}]];function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,a=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===t(a)?a:String(a)),i)}var a}var r=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.caps=!1,this.shift=!1,this.lang="ru"===localStorage.getItem("lang")?"ru":"en"}var r,i;return r=t,(i=[{key:"init",value:function(){var t=this;this.main=document.createElement("main"),this.title=document.createElement("h1"),this.textarea=document.createElement("textarea"),this.keyboard=document.createElement("section"),this.key=document.createElement("button"),this.description=document.createElement("p"),this.main.classList.add("main","container"),this.title.classList.add("main__title"),this.textarea.classList.add("main__textarea"),this.textarea.focus(),this.keyboard.classList.add("keyboard"),this.description.classList.add("keyboard__description"),this.title.textContent="RSSchool Virtual keyboard",this.textarea.placeholder="Type anything...",this.description.textContent="The keyboard was created in the Windows operating system.",this.main.append(this.title,this.textarea,this.keyboard),this.keyboard.append(this.description),document.body.append(this.main),e.forEach((function(e){var n=document.createElement("div");n.classList.add("keyboard__row"),e.forEach((function(e){var r=document.createElement("button");r.classList.add("keyboard__button"),r.setAttribute("type","button"),r.setAttribute("data-code",e.code),r.setAttribute("data-lang-en",e.lang.en),r.setAttribute("data-lang-ru",e.lang.ru),r.setAttribute("data-lang-enShift",e.lang.enShift),r.setAttribute("data-lang-ruShift",e.lang.ruShift),r.setAttribute("func",e.func),r.classList.add("keyboard__button-".concat(e.width)),window.addEventListener("keydown",(function(n){n.shiftKey&&(t.shift=!0,r.textContent=e.lang.enShift)})),window.addEventListener("keyup",(function(n){n.shiftKey||(t.shift=!1,r.textContent=e.lang.en)})),t.keyboard.addEventListener("mousedown",(function(n){var i=n.target.getAttribute("data-code");"ShiftLeft"!==i&&"ShiftRight"!==i||(t.shift=!0,r.textContent=e.lang.enShift)})),t.keyboard.addEventListener("mouseup",(function(n){var i=n.target.getAttribute("data-code");"ShiftLight"!==i&&"ShiftRight"!==i||(t.shift=!1,r.textContent=e.lang.en)})),t.shift&&(r.textContent=e.lang.enShift),r.textContent=e.lang.en,n.append(r)})),t.keyboard.append(n)})),this.keyboard.addEventListener("click",(function(e){var n=e.target,r=n.getAttribute("data-lang-en"),i=n.getAttribute("data-lang-enShift"),a=n.getAttribute("data-code"),u=n.getAttribute("func"),f=t.textarea.value,h=t.textarea.selectionStart,c=t.textarea.selectionEnd,l=t.textarea.value.substring(0,h).lastIndexOf("n"),o=-1===l?0:l+1,d=t.textarea.value.substring(h).indexOf("n"),g=-1===d?t.textarea.value.length:h+d+1,S=f.slice(0,h-1)+f.slice(h),s=f.slice(0,h)+f.slice(h+1);t.textarea.focus(),"BUTTON"===n.tagName&&("Backspace"===a&&h>0&&(t.textarea.value=S,t.textarea.setSelectionRange(h-1,h-1)),"Tab"===a&&(t.textarea.value="".concat(f.substring(0,h),"\t").concat(f.substring(c)),t.textarea.selectionStart=t.textarea.selectionEnd,t.textarea.selectionEnd=h+1),"Enter"===a&&(t.textarea.value="".concat(f.substring(0,h),"\n").concat(f.substring(c)),t.textarea.selectionStart=t.textarea.selectionEnd,t.textarea.selectionEnd=h+1),"Delete"===a&&h<f.length&&(t.shift&&(t.textarea.valueEnShift=s,t.textarea.setSelectionRange(h,h)),t.textarea.value=s,t.textarea.setSelectionRange(h,h)),"ArrowRight"===a&&t.textarea.setSelectionRange(h+1,h+1),"ArrowLeft"===a&&t.textarea.setSelectionRange(h-1,h-1),"ArrowUp"===a&&t.textarea.setSelectionRange(o,o),"ArrowDown"===a&&t.textarea.setSelectionRange(g,g),t.shift&&"false"===u&&(t.textarea.value+=i),!1===t.shift&&"false"===u&&(t.textarea.value+=r))}))}}])&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();window.addEventListener("DOMContentLoaded",(function(){var e=new r;e.init(),e.textarea.focus()}))})();